# ==========================================
# PRODUCTION ENVIRONMENT (Cloud Production)
# ==========================================
# This file is for production environment in GCP
# ALL secrets MUST come from GCP Secret Manager

# Environment
NODE_ENV=production
ENVIRONMENT=production
GCP_PROJECT_ID=${GCP_PROJECT_ID}

# ==========================================
# CLOUD SQL (Shared Database - High Availability)
# ==========================================
DB_HOST=${CLOUD_SQL_SHARED_HOST}
DB_PORT=3306
DB_USERNAME=shared_user
DB_PASSWORD=${SHARED_DB_PASSWORD}  # From Secret Manager
DB_NAME=shared_user_db
CLOUD_SQL_CONNECTION_NAME=${CLOUD_SQL_SHARED_CONNECTION_NAME}

# Connection Pool (optimized for production)
DB_POOL_SIZE=50
DB_POOL_TIMEOUT=30000
DB_SSL_ENABLED=true

# ==========================================
# MEMORYSTORE FOR REDIS (High Availability)
# ==========================================
REDIS_HOST=${MEMORYSTORE_REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}  # From Secret Manager
REDIS_TTL=3600
REDIS_CLUSTER_MODE=true

# ==========================================
# JWT CONFIGURATION
# ==========================================
JWT_SECRET=${JWT_SECRET}  # From Secret Manager
JWT_EXPIRATION=8h
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}  # From Secret Manager
JWT_REFRESH_EXPIRATION=7d

# ==========================================
# SERVICE PORTS
# ==========================================
AUTH_SERVICE_PORT=3001
USER_SERVICE_PORT=3003
CARRIER_SERVICE_PORT=3004
CUSTOMER_SERVICE_PORT=3005
PRICING_SERVICE_PORT=3006
TRANSLATION_SERVICE_PORT=3007

# ==========================================
# SERVICE URLS (Kubernetes Service Discovery)
# ==========================================
AUTH_SERVICE_URL=http://auth-service:3001
USER_SERVICE_URL=http://user-service:3003
CARRIER_SERVICE_URL=http://carrier-service:3004
CUSTOMER_SERVICE_URL=http://customer-service:3005
PRICING_SERVICE_URL=http://pricing-service:3006
TRANSLATION_SERVICE_URL=http://translation-service:3007
FRONTEND_URL=https://app.your-domain.com

# ==========================================
# CLOUD SQL (Business Databases - HA)
# ==========================================
CUSTOMER_DB_HOST=${CLOUD_SQL_CUSTOMER_HOST}
CUSTOMER_DB_PORT=3306
CUSTOMER_DB_USERNAME=customer_user
CUSTOMER_DB_PASSWORD=${CUSTOMER_DB_PASSWORD}
CUSTOMER_DB_NAME=customer_service_db
CLOUD_SQL_CUSTOMER_CONNECTION_NAME=${CLOUD_SQL_CUSTOMER_CONNECTION_NAME}

CARRIER_DB_HOST=${CLOUD_SQL_CARRIER_HOST}
CARRIER_DB_PORT=3306
CARRIER_DB_USERNAME=carrier_user
CARRIER_DB_PASSWORD=${CARRIER_DB_PASSWORD}
CARRIER_DB_NAME=carrier_service_db
CLOUD_SQL_CARRIER_CONNECTION_NAME=${CLOUD_SQL_CARRIER_CONNECTION_NAME}

PRICING_DB_HOST=${CLOUD_SQL_PRICING_HOST}
PRICING_DB_PORT=3306
PRICING_DB_USERNAME=pricing_user
PRICING_DB_PASSWORD=${PRICING_DB_PASSWORD}
PRICING_DB_NAME=pricing_service_db
CLOUD_SQL_PRICING_CONNECTION_NAME=${CLOUD_SQL_PRICING_CONNECTION_NAME}

# ==========================================
# CLOUD LOGGING & MONITORING
# ==========================================
LOG_LEVEL=warn
LOG_FORMAT=json
ENABLE_CONSOLE_LOGGING=false
ENABLE_CLOUD_LOGGING=true
ENABLE_ERROR_REPORTING=true
GCP_LOGGING_PROJECT_ID=${GCP_PROJECT_ID}

# ==========================================
# SECURITY
# ==========================================
CORS_ORIGIN=https://app.your-domain.com
CORS_CREDENTIALS=true
ENABLE_HELMET=true
ENABLE_RATE_LIMITING=true
TRUST_PROXY=true

# ==========================================
# API CONFIGURATION
# ==========================================
API_PREFIX=api/v1
API_RATE_LIMIT=1000
API_RATE_WINDOW=60000
API_TIMEOUT=30000

# ==========================================
# FEATURE FLAGS
# ==========================================
ENABLE_SWAGGER=false
ENABLE_METRICS=true
ENABLE_HEALTH_CHECKS=true
ENABLE_DISTRIBUTED_TRACING=true
ENABLE_PROFILING=true

# ==========================================
# PERFORMANCE
# ==========================================
NODE_OPTIONS=--max-old-space-size=2048
ENABLE_CLUSTERING=true
CLUSTER_WORKERS=auto
