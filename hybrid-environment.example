# ===========================================
# HYBRID DATABASE ARCHITECTURE CONFIGURATION
# ===========================================
# This file contains the environment variables for the hybrid approach
# where Auth + User services share a database, and business services
# use separate databases, all with shared Redis.

# ===========================================
# SHARED INFRASTRUCTURE
# ===========================================

# Shared Database (Auth + User Services)
SHARED_DB_HOST=shared-user-db
SHARED_DB_PORT=3306
SHARED_DB_USERNAME=shared_user
SHARED_DB_PASSWORD=shared_password_2024
SHARED_DB_NAME=shared_user_db
SHARED_DB_ROOT_PASSWORD=shared_root_password_2024

# Shared Redis (All Services)
SHARED_REDIS_HOST=shared-redis
SHARED_REDIS_PORT=6379
SHARED_REDIS_PASSWORD=shared_redis_password_2024

# ===========================================
# CORE SERVICES (Shared Database)
# ===========================================

# Auth Service Configuration
AUTH_SERVICE_PORT=3001
AUTH_SERVICE_NODE_ENV=development
AUTH_SERVICE_JWT_SECRET=your-jwt-secret-key-change-in-production
AUTH_SERVICE_JWT_EXPIRATION=24h
AUTH_SERVICE_FRONTEND_URL=http://localhost:3000

# Kong Gateway Configuration
KONG_ADMIN_URL=http://kong-gateway:8001
KONG_ADMIN_TOKEN=
KONG_SYNC_ENABLED=true

# User Service Configuration
USER_SERVICE_PORT=3003
USER_SERVICE_NODE_ENV=development
USER_SERVICE_FRONTEND_URL=http://localhost:3000

# ===========================================
# BUSINESS SERVICES (Separate Databases)
# ===========================================

# Customer Service Configuration
CUSTOMER_SERVICE_PORT=3004
CUSTOMER_SERVICE_NODE_ENV=development
CUSTOMER_SERVICE_FRONTEND_URL=http://localhost:3000
CUSTOMER_DB_HOST=customer-service-db
CUSTOMER_DB_PORT=3306
CUSTOMER_DB_USERNAME=customer_user
CUSTOMER_DB_PASSWORD=customer_password
CUSTOMER_DB_NAME=customer_service_db
CUSTOMER_DB_ROOT_PASSWORD=customer_root_password

# Carrier Service Configuration
CARRIER_SERVICE_PORT=3005
CARRIER_SERVICE_NODE_ENV=development
CARRIER_SERVICE_FRONTEND_URL=http://localhost:3000
CARRIER_DB_HOST=carrier-service-db
CARRIER_DB_PORT=3306
CARRIER_DB_USERNAME=carrier_user
CARRIER_DB_PASSWORD=carrier_password
CARRIER_DB_NAME=carrier_service_db
CARRIER_DB_ROOT_PASSWORD=carrier_root_password

# Pricing Service Configuration
PRICING_SERVICE_PORT=3006
PRICING_SERVICE_NODE_ENV=development
PRICING_SERVICE_FRONTEND_URL=http://localhost:3000
PRICING_DB_HOST=pricing-service-db
PRICING_DB_PORT=3306
PRICING_DB_USERNAME=pricing_user
PRICING_DB_PASSWORD=pricing_password
PRICING_DB_NAME=pricing_service_db
PRICING_DB_ROOT_PASSWORD=pricing_root_password

# Translation Service Configuration
TRANSLATION_SERVICE_PORT=3007
TRANSLATION_SERVICE_NODE_ENV=development
TRANSLATION_SERVICE_FRONTEND_URL=http://localhost:3000
TRANSLATION_DB_HOST=translation-service-db
TRANSLATION_DB_PORT=3306
TRANSLATION_DB_USERNAME=translation_user
TRANSLATION_DB_PASSWORD=translation_password
TRANSLATION_DB_NAME=translation_service_db
TRANSLATION_DB_ROOT_PASSWORD=translation_root_password

# Seller Service Configuration
SELLER_SERVICE_PORT=3010
SELLER_SERVICE_NODE_ENV=development
SELLER_SERVICE_CORS_ORIGIN=http://localhost:3000
SELLER_DB_HOST=seller-service-db
SELLER_DB_PORT=3306
SELLER_DB_USERNAME=seller_user
SELLER_DB_PASSWORD=seller_password
SELLER_DB_NAME=seller_db
SELLER_DB_ROOT_PASSWORD=root_password

# ===========================================
# CROSS-SERVICE COMMUNICATION
# ===========================================

# Service URLs for inter-service communication
USER_SERVICE_URL=http://user-service:3003
CUSTOMER_SERVICE_URL=http://customer-service:3004
CARRIER_SERVICE_URL=http://carrier-service:3005
PRICING_SERVICE_URL=http://pricing-service:3006

# ===========================================
# FRONTEND CONFIGURATION
# ===========================================

# React Admin Configuration
REACT_APP_AUTH_API_URL=http://localhost:3001
REACT_APP_USER_API_URL=http://localhost:3003
REACT_APP_CUSTOMER_API_URL=http://localhost:3004
REACT_APP_CARRIER_API_URL=http://localhost:3005
REACT_APP_PRICING_API_URL=http://localhost:3006

# ===========================================
# REDIS KEY PREFIXES (Service-specific)
# ===========================================

# Redis key prefixes for namespacing
AUTH_REDIS_KEY_PREFIX=auth
USER_REDIS_KEY_PREFIX=user
CUSTOMER_REDIS_KEY_PREFIX=customer
CARRIER_REDIS_KEY_PREFIX=carrier
PRICING_REDIS_KEY_PREFIX=pricing

# ===========================================
# DEVELOPMENT SETTINGS
# ===========================================

# Development mode settings
NODE_ENV=development
LOG_LEVEL=debug
ENABLE_CORS=true
ENABLE_SWAGGER=true

# ===========================================
# PRODUCTION SETTINGS (Override for production)
# ===========================================

# Uncomment and modify for production deployment
# NODE_ENV=production
# LOG_LEVEL=info
# ENABLE_CORS=false
# ENABLE_SWAGGER=false

# ===========================================
# MONITORING AND OBSERVABILITY
# ===========================================

# Health check settings
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Metrics and monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_TRACING=true
TRACING_SERVICE_NAME=fullstack-project-hybrid

# ===========================================
# SECURITY SETTINGS
# ===========================================

# Security headers and CORS
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true
SECURE_COOKIES=false

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# DATABASE CONNECTION POOL SETTINGS
# ===========================================

# Connection pool settings for all databases
DB_MAX_CONNECTIONS=25
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=30000
DB_ACQUIRE_TIMEOUT=60000
DB_IDLE_TIMEOUT=300000

# ===========================================
# REDIS CONNECTION SETTINGS
# ===========================================

# Redis connection pool settings
REDIS_MAX_CONNECTIONS=20
REDIS_MIN_CONNECTIONS=2
REDIS_CONNECTION_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_ATTEMPTS=3

# ===========================================
# CACHE SETTINGS
# ===========================================

# Cache TTL settings (in seconds)
CACHE_USER_TTL=1800
CACHE_CUSTOMER_TTL=900
CACHE_CARRIER_TTL=900
CACHE_PRICING_TTL=3600
CACHE_SESSION_TTL=86400

# ===========================================
# LOGGING CONFIGURATION
# ===========================================

# Logging settings
LOG_FORMAT=json
LOG_LEVEL=info
LOG_FILE_PATH=/var/log/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# ===========================================
# BACKUP AND RECOVERY
# ===========================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# ===========================================
# NOTIFICATION SETTINGS
# ===========================================

# Email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@yourdomain.com

# ===========================================
# EXTERNAL SERVICES
# ===========================================

# External API configurations
EXTERNAL_API_TIMEOUT=30000
EXTERNAL_API_RETRY_ATTEMPTS=3
EXTERNAL_API_RETRY_DELAY=1000

# ===========================================
# FEATURE FLAGS
# ===========================================

# Feature toggles
FEATURE_NEW_UI=true
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_REAL_TIME_NOTIFICATIONS=true
FEATURE_BULK_OPERATIONS=true
